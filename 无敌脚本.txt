local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")

-- å®‰å…¨åˆå§‹åŒ–å‡½æ•°
local function safeInitialize()
    -- ç­‰å¾…ç©å®¶å¯¹è±¡å®Œå…¨åŠ è½½
    local player = Players.LocalPlayer
    while not player do
        player = Players.LocalPlayer
        wait(0.1)
    end
    
    -- ç¡®ä¿PlayerGuiå­˜åœ¨
    local playerGui = player:FindFirstChild("PlayerGui")
    while not playerGui do
        playerGui = player:WaitForChild("PlayerGui", 2)
        if not playerGui then
            warn("ç­‰å¾…PlayerGuiè¶…æ—¶ï¼Œé‡è¯•ä¸­...")
            wait(1)
        end
    end
    
    return player, playerGui
end

-- åˆ›å»ºå…¨é»‘GUIçš„å‡½æ•°
local function createBlackGui(screenGui, player)
    -- åˆ›å»ºä¸»æ¡†æ¶
    local blackFrame = Instance.new("Frame")
    blackFrame.Name = "MainFrame"
    blackFrame.Size = UDim2.new(0.7, 0, 0.7, 0)
    blackFrame.Position = UDim2.new(0.5, 0, 0.5, 0)
    blackFrame.AnchorPoint = Vector2.new(0.5, 0.5)
    blackFrame.BackgroundColor3 = Color3.new(0, 0, 0)
    blackFrame.BackgroundTransparency = 0
    blackFrame.BorderSizePixel = 0

    -- æ·»åŠ åœ†è§’æ•ˆæœ
    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0.1, 0)
    corner.Parent = blackFrame

    -- åˆ›å»ºå…³é—­æŒ‰é’®
    local closeButton = Instance.new("TextButton")
    closeButton.Name = "CloseButton"
    closeButton.Size = UDim2.new(0.08, 0, 0.08, 0)
    closeButton.Position = UDim2.new(0.95, 0, 0.07, 0)  -- ç¨å¾®ä¸‹ç§»é¿å…ä¸å°Šè´µç”¨æˆ·æ˜¾ç¤ºé‡å 
    closeButton.AnchorPoint = Vector2.new(0.5, 0.5)
    closeButton.Text = "X"
    closeButton.TextColor3 = Color3.new(1, 1, 1)
    closeButton.TextScaled = true
    closeButton.Font = Enum.Font.GothamBold
    closeButton.BackgroundColor3 = Color3.new(0.2, 0.2, 0.2)
    closeButton.BackgroundTransparency = 0.3
    closeButton.BorderSizePixel = 0
    closeButton.ZIndex = 3  -- ç¡®ä¿åœ¨æœ€ä¸Šå±‚

    -- æŒ‰é’®åœ†è§’
    local buttonCorner = Instance.new("UICorner")
    buttonCorner.CornerRadius = UDim.new(0.5, 0)
    buttonCorner.Parent = closeButton

    -- æŒ‰é’®æ‚¬åœæ•ˆæœ
    closeButton.MouseEnter:Connect(function()
        closeButton.BackgroundColor3 = Color3.new(0.3, 0.3, 0.3)
    end)

    closeButton.MouseLeave:Connect(function()
        closeButton.BackgroundColor3 = Color3.new(0.2, 0.2, 0.2)
    end)

    -- ç‚¹å‡»äº‹ä»¶ - åˆ›å»ºå…¨å±"ç»™æˆ‘æ‰ï¼"æ–‡æœ¬
    closeButton.MouseButton1Click:Connect(function()
        -- ç¦ç”¨æŒ‰é’®é˜²æ­¢å¤šæ¬¡ç‚¹å‡»
        closeButton.Active = false
        
        -- æ’­æ”¾å…³é—­éŸ³æ•ˆ
        local closeSound = Instance.new("Sound")
        closeSound.SoundId = "rbxassetid://1398290761"  -- å…³é—­éŸ³æ•ˆ
        closeSound.Volume = 0.5
        closeSound.Parent = screenGui
        closeSound:Play()
        
        -- ç§»é™¤å½“å‰æ‰€æœ‰å†…å®¹
        for _, child in ipairs(screenGui:GetChildren()) do
            if child.Name ~= "CloseSound" then
                child:Destroy()
            end
        end
        
        -- åˆ›å»ºå…¨å±èƒŒæ™¯
        local fullScreenFrame = Instance.new("Frame")
        fullScreenFrame.Name = "FullScreenTextOverlay"
        fullScreenFrame.Size = UDim2.new(1, 0, 1, 0)
        fullScreenFrame.Position = UDim2.new(0, 0, 0, 0)
        fullScreenFrame.BackgroundColor3 = Color3.new(0, 0, 0)
        fullScreenFrame.BackgroundTransparency = 0
        fullScreenFrame.ZIndex = 50
        fullScreenFrame.Parent = screenGui
        
        -- åˆ›å»ºæ–‡æœ¬å®¹å™¨
        local textContainer = Instance.new("Frame")
        textContainer.Name = "TextContainer"
        textContainer.Size = UDim2.new(1, 0, 1, 0)
        textContainer.Position = UDim2.new(0, 0, 0, 0)
        textContainer.BackgroundTransparency = 1
        textContainer.ClipsDescendants = true
        textContainer.ZIndex = 51
        textContainer.Parent = fullScreenFrame
        
        -- æ·»åŠ ç½‘æ ¼å¸ƒå±€
        local gridLayout = Instance.new("UIGridLayout")
        gridLayout.CellPadding = UDim2.new(0, 0, 0, 0)  -- æ— é—´è·
        gridLayout.CellSize = UDim2.new(0.05, 0, 0.05, 0)  -- å•å…ƒæ ¼å¤§å°ï¼ˆ5%å±å¹•å®½é«˜ï¼‰
        gridLayout.FillDirection = Enum.FillDirection.Horizontal
        gridLayout.HorizontalAlignment = Enum.HorizontalAlignment.Left
        gridLayout.VerticalAlignment = Enum.VerticalAlignment.Top
        gridLayout.SortOrder = Enum.SortOrder.LayoutOrder
        gridLayout.Parent = textContainer
        
        -- å­˜å‚¨æ‰€æœ‰æ–‡æœ¬æ ‡ç­¾çš„è¡¨
        local allTextLabels = {}
        
        -- è®¡ç®—å•å…ƒæ ¼æ•°é‡
        local columns = math.floor(1 / gridLayout.CellSize.X.Scale)
        local rows = math.floor(1 / gridLayout.CellSize.Y.Scale)
        local totalCells = columns * rows
        
        -- åˆ›å»ºæ–‡æœ¬å•å…ƒæ ¼
        for i = 1, totalCells do
            local textLabel = Instance.new("TextLabel")
            textLabel.Name = "DropText"
            textLabel.Text = "ç»™æˆ‘æ‰ï¼"
            textLabel.TextColor3 = Color3.new(1, 1, 1)
            textLabel.Font = Enum.Font.GothamBold
            textLabel.TextSize = 18
            textLabel.TextScaled = true
            textLabel.Size = UDim2.new(1, 0, 1, 0)
            textLabel.BackgroundTransparency = 1
            textLabel.TextWrapped = true
            textLabel.ZIndex = 52
            textLabel.Parent = textContainer
            
            table.insert(allTextLabels, textLabel)
        end
        
        -- åˆ›å»ºå¿«é€Ÿæ¸å˜é¢œè‰²ç³»ç»Ÿ
        local hueOffset = 0
        local speedMultiplier = 20  -- éå¸¸å¿«çš„é¢œè‰²å˜åŒ–
        
        RunService.RenderStepped:Connect(function(deltaTime)
            hueOffset = (hueOffset + deltaTime * speedMultiplier) % 1
            
            for i, textLabel in ipairs(allTextLabels) do
                -- è®¡ç®—æ¯ä¸ªæ–‡æœ¬çš„è‰²ç›¸åç§»
                local hue = (hueOffset + i * 0.01) % 1
                
                -- å°†HSVè½¬æ¢ä¸ºRGB
                local color = Color3.fromHSV(hue, 1, 1)
                textLabel.TextColor3 = color
            end
        end)
        
        -- æ·»åŠ æ–‡æœ¬æ‰è½åŠ¨ç”»
        local dropTime = 0
        RunService.RenderStepped:Connect(function(deltaTime)
            dropTime += deltaTime * 2
            
            for i, textLabel in ipairs(allTextLabels) do
                -- æ·»åŠ è½»å¾®æµ®åŠ¨æ•ˆæœ
                local offsetX = math.sin(dropTime + i * 0.1) * 3
                local offsetY = math.cos(dropTime + i * 0.1) * 3
                textLabel.Position = UDim2.new(0, offsetX, 0, offsetY)
                
                -- éšæœºæ—‹è½¬æ•ˆæœ
                textLabel.Rotation = math.sin(dropTime * 0.5 + i) * 5
            end
        end)
        
        -- æ·»åŠ æ¶ˆå¤±å€’è®¡æ—¶
        delay(3, function()
            -- åˆ›å»ºæ·¡å‡ºåŠ¨ç”»
            local fadeTween = TweenService:Create(fullScreenFrame, TweenInfo.new(1.5, Enum.EasingStyle.Quad), {
                BackgroundTransparency = 1
            })
            fadeTween:Play()
            
            -- æ–‡æœ¬æ·¡å‡º
            for _, textLabel in ipairs(allTextLabels) do
                local textTween = TweenService:Create(textLabel, TweenInfo.new(1.5, Enum.EasingStyle.Quad), {
                    TextTransparency = 1
                })
                textTween:Play()
            end
            
            -- å®Œæˆåé”€æ¯
            fadeTween.Completed:Wait()
            screenGui:Destroy()
        end)
    end)

    -- ====== åˆ›å»ºæ–‡æœ¬ç½‘æ ¼ ======
    local textContainer = Instance.new("Frame")
    textContainer.Name = "TextGridContainer"
    textContainer.Size = UDim2.new(0.95, 0, 0.95, 0)  -- ç•™å‡ºè¾¹è·
    textContainer.Position = UDim2.new(0.025, 0, 0.025, 0)  -- å±…ä¸­
    textContainer.BackgroundTransparency = 1
    textContainer.ClipsDescendants = true  -- é˜²æ­¢æ–‡æœ¬æº¢å‡º
    textContainer.Parent = blackFrame

    -- æ·»åŠ ç½‘æ ¼å¸ƒå±€
    local gridLayout = Instance.new("UIGridLayout")
    gridLayout.CellPadding = UDim2.new(0.01, 0, 0.01, 0)  -- å•å…ƒæ ¼é—´è·
    gridLayout.CellSize = UDim2.new(0.15, 0, 0.15, 0)     -- å•å…ƒæ ¼å¤§å°
    gridLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center
    gridLayout.VerticalAlignment = Enum.VerticalAlignment.Center
    gridLayout.SortOrder = Enum.SortOrder.LayoutOrder
    gridLayout.Parent = textContainer

    -- å­˜å‚¨æ‰€æœ‰æ–‡æœ¬æ ‡ç­¾çš„è¡¨
    local allTextLabels = {}

    -- åˆ›å»ºæ–‡æœ¬å•å…ƒæ ¼çš„å‡½æ•°
    local function createTextCell()
        local textFrame = Instance.new("Frame")
        textFrame.Size = UDim2.new(1, 0, 1, 0)
        textFrame.BackgroundTransparency = 1
        
        local textLabel = Instance.new("TextLabel")
        textLabel.Name = "PrankText"
        textLabel.Text = "å“ˆå“ˆï¼Œä½ è¢«éª—äº†"
        textLabel.TextColor3 = Color3.new(1, 1, 1)  -- åˆå§‹ç™½è‰²
        textLabel.Font = Enum.Font.SourceSansBold
        textLabel.TextSize = 18
        textLabel.TextScaled = true  -- è‡ªåŠ¨ç¼©æ”¾ä»¥é€‚åº”å•å…ƒæ ¼
        textLabel.Size = UDim2.new(0.9, 0, 0.9, 0)
        textLabel.Position = UDim2.new(0.05, 0, 0.05, 0)
        textLabel.BackgroundTransparency = 1
        textLabel.TextWrapped = true  -- è‡ªåŠ¨æ¢è¡Œ
        textLabel.Parent = textFrame
        
        -- éšæœºæ—‹è½¬è§’åº¦ï¼ˆ-10åˆ°10åº¦ä¹‹é—´ï¼‰
        textFrame.Rotation = math.random(-10, 10)
        
        -- æ·»åŠ åˆ°å…¨å±€è¡¨
        table.insert(allTextLabels, textLabel)
        
        return textFrame
    end

    -- è®¡ç®—éœ€è¦å¤šå°‘å•å…ƒæ ¼å¡«æ»¡å®¹å™¨
    local columns = math.floor(1 / gridLayout.CellSize.X.Scale)
    local rows = math.floor(1 / gridLayout.CellSize.Y.Scale)
    local totalCells = columns * rows

    -- åˆ›å»ºå•å…ƒæ ¼å¡«æ»¡ç½‘æ ¼
    for i = 1, totalCells do
        local cell = createTextCell()
        cell.Parent = textContainer
    end

    -- ====== ä¸­å¤®å¤§æ–‡æœ¬ - ç²¾ç¡®å±…ä¸­ ======
    local centerText = Instance.new("TextLabel")
    centerText.Name = "CenterText"
    centerText.Text = "ä½ å¯ä»¥å…³é—­äº†"  -- ä¿®æ”¹ä¸ºæŒ‡å®šæ–‡æœ¬
    centerText.TextColor3 = Color3.new(1, 1, 1)  -- åˆå§‹ç™½è‰²
    centerText.Font = Enum.Font.GothamBold
    centerText.TextScaled = true
    centerText.Size = UDim2.new(0.7, 0, 0.25, 0)  -- é€‚å½“å¤§å°
    centerText.Position = UDim2.new(0.5, 0, 0.5, 0)  -- ç»å¯¹å±…ä¸­ä½ç½®
    centerText.AnchorPoint = Vector2.new(0.5, 0.5)  -- å…³é”®ï¼šä¸­å¿ƒé”šç‚¹
    centerText.BackgroundTransparency = 1
    centerText.ZIndex = 2  -- åœ¨ç½‘æ ¼ä¹‹ä¸Š
    centerText.TextStrokeTransparency = 0.5  -- æ–‡å­—æè¾¹
    centerText.TextStrokeColor3 = Color3.new(0, 0, 0)
    centerText.Parent = blackFrame

    -- æ·»åŠ åˆ°å…¨å±€è¡¨
    table.insert(allTextLabels, centerText)

    -- ====== é¢œè‰²æ¸å˜ç³»ç»Ÿ ======
    local hueOffset = 0  -- å…¨å±€è‰²ç›¸åç§»

    -- ä¸ºæ¯ä¸ªæ–‡æœ¬æ ‡ç­¾åˆ›å»ºç‹¬ç«‹çš„æ¸å˜æ•ˆæœ
    RunService.RenderStepped:Connect(function(deltaTime)
        hueOffset = (hueOffset + deltaTime * 0.2) % 1  -- éšæ—¶é—´å˜åŒ–
        
        for i, textLabel in ipairs(allTextLabels) do
            -- è®¡ç®—æ¯ä¸ªæ–‡æœ¬çš„è‰²ç›¸åç§»ï¼ˆé”™å¼€ç›¸ä½ï¼‰
            local hue = (hueOffset + i * 0.05) % 1
            
            -- å°†HSVè½¬æ¢ä¸ºRGB
            local color = Color3.fromHSV(hue, 1, 1)
            textLabel.TextColor3 = color
            
            -- ä¸­å¤®æ–‡æœ¬æ·»åŠ ç‰¹æ®Šæ•ˆæœ
            if textLabel == centerText then
                -- æ·»åŠ è„‰åŠ¨ç¼©æ”¾æ•ˆæœ
                local pulse = math.sin(os.clock() * 4) * 0.1 + 1.0
                textLabel.Size = UDim2.new(0.7 * pulse, 0, 0.25 * pulse, 0)
                
                -- æ·»åŠ å¯¹æ¯”è‰²æè¾¹
                textLabel.TextStrokeColor3 = Color3.new(1 - color.R, 1 - color.G, 1 - color.B)
                
                -- æ·»åŠ æ–‡å­—é—ªçƒæ•ˆæœ
                if math.sin(os.clock() * 8) > 0.8 then
                    textLabel.TextTransparency = 0.3
                else
                    textLabel.TextTransparency = 0
                end
            end
        end
    end)

    -- æ·»åŠ åˆ°çˆ¶çº§
    closeButton.Parent = blackFrame
    blackFrame.Parent = screenGui

    -- æ·»åŠ æç¤ºéŸ³æ•ˆ
    local sound = Instance.new("Sound")
    sound.SoundId = "rbxassetid://9047378711"  -- æç¤ºéŸ³æ•ˆ
    sound.Volume = 0.5
    sound.Parent = screenGui
    sound:Play()

    print("å…¨é»‘GUIå·²åˆ›å»ºï¼")
end

-- ä¸»æ‰§è¡Œå‡½æ•°
local function main()
    local success, player, playerGui = pcall(safeInitialize)
    if not success then
        warn("åˆå§‹åŒ–å¤±è´¥: " .. tostring(player))
        return
    end
    
    -- åˆ›å»ºä¸»UIå®¹å™¨
    local screenGui = Instance.new("ScreenGui")
    screenGui.Name = "PrankGui"
    screenGui.ResetOnSpawn = false
    screenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    screenGui.Parent = playerGui

    -- åˆ›å»ºå³ä¸Šè§’å°Šè´µç”¨æˆ·æ˜¾ç¤ºï¼ˆå›ºå®šåœ¨å±å¹•æœ€å³ä¸Šè§’é¡¶éƒ¨ï¼‰
    local welcomeLabel = Instance.new("TextLabel")
    welcomeLabel.Name = "WelcomeLabel"
    welcomeLabel.AnchorPoint = Vector2.new(1, 0)  -- å³ä¸Šè§’é”šç‚¹
    welcomeLabel.Position = UDim2.new(1, 0, 0, 0)  -- ç´§è´´å³ä¸Šè§’é¡¶éƒ¨
    welcomeLabel.Size = UDim2.new(0.25, 0, 0, 0)  -- å®½åº¦25%ï¼Œé«˜åº¦è‡ªé€‚åº”
    welcomeLabel.AutomaticSize = Enum.AutomaticSize.Y  -- é«˜åº¦è‡ªé€‚åº”å†…å®¹
    welcomeLabel.BackgroundTransparency = 1  -- å®Œå…¨é€æ˜èƒŒæ™¯
    welcomeLabel.Text = "å°Šè´µçš„æ— æ•Œè„šæœ¬ç”¨æˆ·\nï¼š" .. player.Name
    welcomeLabel.Font = Enum.Font.GothamBold
    welcomeLabel.TextSize = 20
    welcomeLabel.TextColor3 = Color3.new(1, 1, 0)
    welcomeLabel.TextStrokeTransparency = 0.4
    welcomeLabel.TextStrokeColor3 = Color3.new(0, 0, 0)
    welcomeLabel.TextWrapped = true  -- æ–‡æœ¬è‡ªåŠ¨æ¢è¡Œ
    welcomeLabel.TextXAlignment = Enum.TextXAlignment.Right  -- æ–‡æœ¬å³å¯¹é½
    welcomeLabel.TextYAlignment = Enum.TextYAlignment.Top    -- æ–‡æœ¬é¡¶éƒ¨å¯¹é½
    welcomeLabel.ZIndex = 100  -- è®¾ç½®æ›´é«˜çš„ZIndexç¡®ä¿åœ¨æœ€ä¸Šå±‚
    welcomeLabel.Parent = screenGui

    -- åˆ›å»ºä¸»æ–‡æœ¬æ˜¾ç¤º
    local textLabel = Instance.new("TextLabel")
    textLabel.Name = "MainText"
    textLabel.AnchorPoint = Vector2.new(0.5, 0.5)
    textLabel.Position = UDim2.new(0.5, 0, 0.5, 0)
    textLabel.Size = UDim2.new(0.8, 0, 0.2, 0)
    textLabel.BackgroundTransparency = 1
    textLabel.Text = ""
    textLabel.Font = Enum.Font.GothamBlack
    textLabel.TextSize = 48
    textLabel.TextColor3 = Color3.new(1, 1, 1)
    textLabel.TextStrokeTransparency = 0.3
    textLabel.TextStrokeColor3 = Color3.new(0, 0, 0)
    textLabel.TextScaled = true
    textLabel.ZIndex = 11
    textLabel.Parent = screenGui

    -- æ·»åŠ æ–‡æœ¬é˜´å½±
    local textShadow = textLabel:Clone()
    textShadow.Name = "TextShadow"
    textShadow.TextColor3 = Color3.new(0, 0, 0)
    textShadow.TextTransparency = 0.7
    textShadow.Position = UDim2.new(0.5, 4, 0.5, 4)
    textShadow.ZIndex = 9
    textShadow.Parent = screenGui

    -- æ¸å˜é¢œè‰²å‡½æ•°
    local function rainbowColor(t, saturation, brightness)
        saturation = saturation or 0.9
        brightness = brightness or 0.9
        local r = (math.sin(t * 1.5 + 0) * 0.5 + 0.5)
        local g = (math.sin(t * 1.5 + 2) * 0.5 + 0.5)
        local b = (math.sin(t * 1.5 + 4) * 0.5 + 0.5)
        
        -- åº”ç”¨é¥±å’Œåº¦å’Œäº®åº¦
        local maxVal = math.max(r, g, b)
        local minVal = math.min(r, g, b)
        local delta = maxVal - minVal
        
        if delta > 0 then
            r = (r - minVal) / delta * saturation + (1 - saturation) * maxVal
            g = (g - minVal) / delta * saturation + (1 - saturation) * maxVal
            b = (b - minVal) / delta * saturation + (1 - saturation) * maxVal
        end
        
        return Color3.new(
            r * brightness,
            g * brightness,
            b * brightness
        )
    end

    -- æ–‡æœ¬åºåˆ—ï¼ˆæ·»åŠ å€’è®¡æ—¶ï¼‰
    local messages = {
        "è¿™æ˜¯å…¨ç½‘æœ€å…¨é¢çš„è„šæœ¬",
        "è€—æ—¶ä¸€å¹´æ‰“é€ ",
        "åŒ…å«æ‰€æœ‰çƒ­é—¨æœåŠ¡å™¨",
        "ç”¨è¿‡çš„éƒ½è¯´å¥½ï¼",
        "5",
        "4",
        "3",
        "2",
        "1",
        "å¯åŠ¨ï¼ï¼"
    }

    -- æ·»åŠ è½»å¾®æµ®åŠ¨åŠ¨ç”»ï¼ˆä»…ç”¨äºä¸»æ–‡æœ¬ï¼‰
    local function addFloatAnimation(object)
        local originalPosition = object.Position
        
        coroutine.wrap(function()
            local t = 0
            while object and object.Parent do
                t += 0.02
                local floatX = math.sin(t * 1.2) * 3
                local floatY = math.cos(t * 1.5) * 2
                object.Position = originalPosition + UDim2.new(0, floatX, 0, floatY)
                RunService.Heartbeat:Wait()
            end
        end)()
    end

    -- æ·»åŠ æŒç»­çš„é¢œè‰²å˜åŒ–åŠ¨ç”»ï¼ˆç”¨äºç”¨æˆ·æ–‡æœ¬ï¼‰
    local function startWelcomeColorAnimation()
        local welcomeTime = 0
        
        coroutine.wrap(function()
            while welcomeLabel and welcomeLabel.Parent do
                welcomeTime += RunService.Heartbeat:Wait() * 0.7
                local welcomeColor = rainbowColor(welcomeTime, 0.85, 0.95)
                welcomeLabel.TextColor3 = welcomeColor
            end
        end)()
    end

    -- æ˜¾ç¤ºæ–‡æœ¬åºåˆ—
    local function showMessages()
        local timeCounter = 0
        local colorUpdateConnection
        
        -- å¯åŠ¨ç”¨æˆ·æ–‡æœ¬çš„æŒç»­é¢œè‰²åŠ¨ç”»
        startWelcomeColorAnimation()
        
        -- æ·»åŠ ä¸»æ–‡æœ¬æµ®åŠ¨åŠ¨ç”»ï¼ˆç”¨æˆ·æ–‡æœ¬æ— åŠ¨ç”»ï¼‰
        addFloatAnimation(textLabel)
        
        for _, message in ipairs(messages) do
            textLabel.Text = message
            textShadow.Text = message
            
            -- å¼€å§‹é¢œè‰²æ¸å˜
            if colorUpdateConnection then
                colorUpdateConnection:Disconnect()
            end
            timeCounter = 0
            
            -- æ ¹æ®æ¶ˆæ¯ç±»å‹è®¾ç½®ä¸åŒçš„é¢œè‰²æ–¹æ¡ˆ
            local colorScheme = "rainbow"  -- é»˜è®¤å½©è™¹è‰²
            if tonumber(message) then
                colorScheme = "red"  -- å€’è®¡æ—¶æ•°å­—ç”¨çº¢è‰²
            elseif message == "å¯åŠ¨ï¼ï¼" then
                colorScheme = "green"  -- å¯åŠ¨æ–‡æœ¬ç”¨ç»¿è‰²
            end
            
            colorUpdateConnection = RunService.Heartbeat:Connect(function(dt)
                timeCounter += dt
                
                -- æ›´æ–°ä¸»æ–‡æœ¬é¢œè‰²
                local mainColor
                if colorScheme == "red" then
                    -- çº¢è‰²é—ªçƒæ•ˆæœ
                    local pulse = math.sin(timeCounter * 10) * 0.5 + 0.5
                    mainColor = Color3.new(1, pulse * 0.3, pulse * 0.3)
                elseif colorScheme == "green" then
                    -- ç»¿è‰²è„‰åŠ¨æ•ˆæœ
                    local pulse = math.sin(timeCounter * 5) * 0.5 + 0.5
                    mainColor = Color3.new(pulse * 0.3, 1, pulse * 0.3)
                else
                    -- å½©è™¹æ•ˆæœ
                    mainColor = rainbowColor(timeCounter, 0.95, 0.95)
                end
                
                textLabel.TextColor3 = mainColor
                textLabel.TextStrokeColor3 = Color3.new(
                    math.clamp(1 - mainColor.R, 0, 1),
                    math.clamp(1 - mainColor.G, 0, 1),
                    math.clamp(1 - mainColor.B, 0, 1)
                )
                
                -- æ›´æ–°é˜´å½±æ–‡æœ¬
                textShadow.Text = textLabel.Text
            end)
            
            -- æ·»åŠ å…¥åœºåŠ¨ç”»
            textLabel.Size = UDim2.new(0.1, 0, 0.1, 0)
            
            -- æ ¹æ®æ¶ˆæ¯ç±»å‹è®¾ç½®ä¸åŒçš„åŠ¨ç”»æ•ˆæœ
            local expandInfo = TweenInfo.new(0.3, Enum.EasingStyle.Back, Enum.EasingDirection.Out)
            if tonumber(message) then
                -- å€’è®¡æ—¶æ•°å­—ï¼šå¿«é€Ÿæ”¾å¤§
                expandInfo = TweenInfo.new(0.2, Enum.EasingStyle.Quint, Enum.EasingDirection.Out)
            elseif message == "å¯åŠ¨ï¼ï¼" then
                -- å¯åŠ¨æ–‡æœ¬ï¼šå¼¹è·³æ•ˆæœ
                expandInfo = TweenInfo.new(0.5, Enum.EasingStyle.Bounce, Enum.EasingDirection.Out)
            end
            
            local expandTween = TweenService:Create(textLabel, expandInfo, {
                Size = UDim2.new(0.8, 0, 0.2, 0)
            })
            expandTween:Play()
            
            wait(expandInfo.Time)
            
            -- æ·»åŠ æŠ–åŠ¨æ•ˆæœï¼ˆå€’è®¡æ—¶æ•°å­—ä¸æŠ–åŠ¨ï¼‰
            if not tonumber(message) then
                local shakeStart = os.clock()
                local shakeDuration = 0.5
                if message == "å¯åŠ¨ï¼ï¼" then
                    shakeDuration = 0.8  -- å¯åŠ¨æ–‡æœ¬æŠ–åŠ¨æ›´ä¹…
                end
                
                while os.clock() - shakeStart < shakeDuration do
                    local shakeX = math.random(-5, 5)
                    local shakeY = math.random(-5, 5)
                    textLabel.Position = UDim2.new(0.5, shakeX, 0.5, shakeY)
                    textShadow.Position = UDim2.new(0.5, shakeX + 4, 0.5, shakeY + 4)
                    RunService.Heartbeat:Wait()
                end
                textLabel.Position = UDim2.new(0.5, 0, 0.5, 0)
                textShadow.Position = UDim2.new(0.5, 4, 0.5, 4)
            end
            
            -- æ ¹æ®æ¶ˆæ¯ç±»å‹è®¾ç½®ä¸åŒçš„ç­‰å¾…æ—¶é—´
            local waitTime = 1.5
            if tonumber(message) then
                waitTime = 0.5  -- å€’è®¡æ—¶æ•°å­—æ˜¾ç¤ºæ—¶é—´è¾ƒçŸ­
            elseif message == "å¯åŠ¨ï¼ï¼" then
                waitTime = 1.8  -- å¯åŠ¨æ–‡æœ¬æ˜¾ç¤ºæ—¶é—´è¾ƒé•¿
            end
            
            wait(waitTime)
        end
        
        -- æ¸…é™¤ä¸»æ–‡æœ¬é¢œè‰²æ›´æ–°è¿æ¥
        if colorUpdateConnection then
            colorUpdateConnection:Disconnect()
        end
        
        -- ä¸»æ–‡æœ¬æ·¡å‡ºåŠ¨ç”»
        local textTweenInfo = TweenInfo.new(1.5, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)
        
        -- ä¸»æ–‡æœ¬æ·¡å‡º
        local textTween = TweenService:Create(textLabel, textTweenInfo, {
            TextTransparency = 1,
            TextStrokeTransparency = 1,
            Size = UDim2.new(1.0, 0, 0.25, 0)
        })
        textTween:Play()
        
        -- æ–‡æœ¬é˜´å½±æ·¡å‡º
        local shadowTween = TweenService:Create(textShadow, textTweenInfo, {
            TextTransparency = 1,
            TextStrokeTransparency = 1,
            Size = UDim2.new(1.0, 0, 0.25, 0)
        })
        shadowTween:Play()
        
        -- ç­‰å¾…åŠ¨ç”»å®Œæˆ
        textTween.Completed:Wait()
        
        -- ç§»é™¤ä¸»æ–‡æœ¬å…ƒç´ ï¼ˆç”¨æˆ·æ–‡æœ¬ä¿ç•™ï¼‰
        textLabel:Destroy()
        textShadow:Destroy()
        
        -- åŠ¨ç”»ç»“æŸååˆ›å»ºå…¨é»‘GUI
        createBlackGui(screenGui, player)
    end

    -- æ·»åŠ å¯åŠ¨å»¶è¿Ÿ
    wait(0.5)
    showMessages()
end

-- å®‰å…¨å¯åŠ¨
local success, err = pcall(main)
if not success then
    warn("è„šæœ¬æ‰§è¡Œå¤±è´¥: " .. tostring(err))
end
print("âœ… ç­‰å¾…ç»“æŸï¼Œå¼€å§‹æ‰§è¡Œä¸»è„šæœ¬...")

-- åœ¨è¿™é‡Œæ‹¼æ¥ä½ çš„ä¸»è„šæœ¬
-- ä½ çš„ä¸»è„šæœ¬å†…å®¹ä»è¿™é‡Œå¼€å§‹...
local sound4 = Instance.new("Sound")
        sound4.SoundId = "rbxassetid://106786416076383"
        sound4.Volume = 1
        sound4.Looped = true
        sound4.Parent = workspace
        sound4:Play()

        msg = Instance.new("Message", workspace)
        msg.Text = "å°±ä½ è¿˜æƒ³å¼€æŒ‚ğŸ˜¡ğŸ˜¡"
        wait(1)
        msg:Destroy()

        while true do end